{extend name="/layer" /} {block name="main"}
<form class="layui-form layui-form-pane" onsubmit="return false;">
    <input type="hidden" name="id" value="{$detail.id}">
    <input type="hidden" name="sign" value="{$detail.sign}">
    <div class="layui-tab">
        <ul class="layui-tab-title">
            <li class="layui-this">基本信息</li>
            <li>图片信息</li>
        </ul>
        <div class="layui-tab-content">
            <div class="layui-tab-item layui-show">
                <div class="layui-form-item">
                    <label for="name" class="layui-form-label">
                        <span class="x-red">*</span>中文名称
                    </label>
                    <div class="layui-input-block">
                        <input type="text" value="{$detail.title}" name="title" required="" lay-verify="required" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="name" class="layui-form-label">
                        <span class="x-red">*</span>英文名称
                    </label>
                    <div class="layui-input-block">
                        <input type="text" value="{$detail.entitle}" name="entitle" required="" lay-verify="required" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="name" class="layui-form-label">
                        <span class="x-red">*</span>排序
                    </label>
                    <div class="layui-input-block">
                        <input type="text" name="sort" value="{$detail.sort}" required="" lay-verify="required" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label" for="desc">
                        品牌描述
                    </label>
                    <div class="layui-input-block">
                        <textarea name="desc" placeholder="请输入品牌描述" class="layui-textarea" id="desc-build">{$detail.desc}</textarea>
                    </div>
                </div>
            </div>

            <!--***********商品图片*************-->
            <div class="layui-tab-item">
                <div class="layui-form-item">
                    <label for="phone" class="layui-form-label">图片</label>
                </div>
                <div class="upload-img-list" id="upload-container">
                    {volist name="detail.upload" id="vo"}
                        <div class="image-item">
                            <i class="fa fa-times image-item-del"></i>
                            <img src="{$imageUrl}{$vo.filekey}" alt="">
                            <input type="hidden" name="single[{$i-1}][id]" value="{$vo.fid}">
                            <input type="hidden" name="single[{$i-1}][key]" value="{$vo.filekey}">
                        </div>
                    {/volist}
                    <i class="fa fa-plus upload-plus" id="upload-btn-single"></i>
                </div>
            </div>

        </div>
    </div>
    <div class="layui-form-item x-form-btns">
        <div class="layui-input-block">
            <button class="layui-btn" lay-submit="" lay-filter="form-submit">立即提交</button>
            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
        </div>
    </div>
</form>
<script>
window.recall = function(){
    $(".upload-img-list").on("click",'#upload-btn-single',function(){
        window.uploadConfig = {
            num : 1,
            container : "#upload-container",
            mark : 'single',
            chooseFunc : chooseFile
        }
        xAdminShow('选择图片',"{:url('file/choose')}");
    });
    
    form.on('submit(form-submit)', function(data) {
        xAdminItemAddEdit("{:url($ctrl.'/'.$action.'_edit')}",data.field);
    });
}
</script>
{/block}

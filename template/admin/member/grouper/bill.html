{extend name="/layout" /}
{block name="main"}
<body class="layui-layout-body">
	<div class="layui-layout layui-layout-admin my-layout-admin">
		{:$html->formBegin()}
			<div class="layui-body" style="top: 0;">
				<div class="layui-tab">
					<div class="layui-tab-content">
						<div class="layui-tab-item layui-show">
							<table class="layui-table">
								<thead class="tablejs-head">
								<tr>
									<th>姓名</th>
									<th>手机号</th>
									<th>佣金总额</th>
									<th>已结佣金</th>
									<th>可结佣金</th>
									<th>本次结算金额</th>
								</tr>
							</thead>
							<tbody class="tablejs-body">
								{volist name="grouper" id="gp"}
								<tr>
									<td>{$gp.realname}</td>
									<td>{$gp.mobile}</td>
									<td>{$gp.income}</td>
									<td>{$gp.bill}</td>
									<td>{$gp.pedding}</td>
									<td>
										<input class="layui-input" type="text" name="bill[{$gp.id}]" value="{$gp.pedding}" max="{$gp.pedding}" lay-verify="number|maxMoney">
									</td>
								</tr>
								{/volist}
							</tbody>
						</table>
			            </div>
					</div>
				</div>
			</div>
		{:$html->formEnd(url($ctrl."/".$action."_bill"))}
	</div>
	<script type="text/javascript">
	window.recall=function(){
		form.verify({
			maxMoney: function(value, item){ //value：表单的值、item：表单的DOM对象
				var max = $(item).attr('max');
				if(value>max){
					return '该团长最多可结算'+max+"元";
				}
		    }
		});
	}
	</script>
	
</body>
{/block}